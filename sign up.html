<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Join EverGreen Empire | Creator Signup</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    :root {
      --navy: #071b3b;
      --dark-navy: #00152c;
      --gold: #d4af37;
      --light-gold: #e6d4a8;
      --white: #ffffff;
      --light: #f8fafc;
      --success: #10b981;
      --danger: #ef4444;
      --border-radius: 20px;
      --shadow: 0 25px 50px -12px rgba(7, 27, 59, 0.25);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      background: linear-gradient(135deg, var(--navy) 0%, var(--dark-navy) 100%);
      color: var(--white);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    /* Animated Background */
    .bg-decoration {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: -1;
    }

    .bg-circle {
      position: absolute;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(212, 175, 55, 0.15) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    .circle-1 {
      width: 400px;
      height: 400px;
      top: -200px;
      right: -150px;
      animation-delay: 0s;
    }

    .circle-2 {
      width: 300px;
      height: 300px;
      bottom: -150px;
      left: -100px;
      animation-delay: 2s;
    }

    .circle-3 {
      width: 200px;
      height: 200px;
      top: 50%;
      left: 10%;
      animation-delay: 4s;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) scale(1); }
      50% { transform: translateY(-20px) scale(1.05); }
    }

    /* Signup Container */
    .signup-container {
      width: 100%;
      max-width: 500px;
      padding: 20px;
      animation: slideUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .signup-box {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: var(--border-radius);
      padding: 50px 40px;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .signup-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 6px;
      background: linear-gradient(90deg, var(--gold), #ffd700, var(--gold));
      background-size: 200% 100%;
      animation: shimmer 3s ease-in-out infinite;
    }

    @keyframes shimmer {
      0%, 100% { background-position: -200% 0; }
      50% { background-position: 200% 0; }
    }

    .logo {
      text-align: center;
      margin-bottom: 40px;
    }

    .logo h1 {
      font-family: "Montserrat", sans-serif;
      font-size: 2.5em;
      font-weight: 900;
      margin-bottom: 8px;
      background: linear-gradient(135deg, var(--navy) 0%, var(--gold) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .logo .subtitle {
      color: var(--gold);
      font-size: 1.1em;
      font-weight: 600;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .signup-box h2 {
      color: var(--navy);
      font-size: 1.8em;
      margin-bottom: 30px;
      font-weight: 700;
      text-align: center;
      font-family: "Montserrat", sans-serif;
    }

    .form-group {
      margin-bottom: 25px;
      position: relative;
    }

    .form-row {
      display: flex;
      gap: 20px;
    }

    .form-row .form-group {
      flex: 1;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      color: var(--navy);
      font-weight: 600;
      font-size: 0.9em;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .signup-box input,
    .signup-box select {
      width: 100%;
      padding: 16px 20px;
      border-radius: 12px;
      border: 2px solid #e2e8f0;
      font-size: 1em;
      outline: none;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.8);
      color: var(--navy);
      font-weight: 500;
    }

    .signup-box input:focus,
    .signup-box select:focus {
      border-color: var(--gold);
      background: var(--white);
      box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.1);
      transform: translateY(-2px);
    }

    .signup-box input.error {
      border-color: var(--danger);
      background: rgba(239, 68, 68, 0.05);
    }

    .password-container {
      position: relative;
    }

    .password-toggle {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #64748b;
      cursor: pointer;
      font-size: 1.3em;
      padding: 8px;
      transition: all 0.3s ease;
      border-radius: 8px;
    }

    .password-toggle:hover {
      color: var(--navy);
      background: rgba(212, 175, 55, 0.1);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 18px 32px;
      border-radius: 12px;
      font-weight: 600;
      text-decoration: none;
      margin: 10px 0;
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      cursor: pointer;
      border: none;
      font-size: 1.1em;
      width: 100%;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.6s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn.main {
      background: linear-gradient(135deg, var(--navy) 0%, var(--dark-navy) 100%);
      color: var(--white);
      box-shadow: 0 8px 30px rgba(7, 27, 59, 0.3);
    }

    .btn.main:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(7, 27, 59, 0.4);
    }

    .btn:active {
      transform: translateY(-1px);
    }

    .btn:disabled {
      background: #94a3b8;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .btn.loading {
      color: transparent;
    }

    .btn.loading::after {
      content: "";
      position: absolute;
      width: 24px;
      height: 24px;
      top: 50%;
      left: 50%;
      margin-left: -12px;
      margin-top: -12px;
      border: 3px solid var(--white);
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .terms {
      font-size: 0.9em;
      color: #64748b;
      text-align: center;
      margin: 25px 0;
      line-height: 1.6;
    }

    .terms a {
      color: var(--navy);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      position: relative;
    }

    .terms a::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--gold);
      transition: width 0.3s ease;
    }

    .terms a:hover {
      color: var(--gold);
    }

    .terms a:hover::after {
      width: 100%;
    }

    .login-link {
      text-align: center;
      margin-top: 30px;
      font-size: 1em;
      color: #64748b;
    }

    .login-link a {
      color: var(--navy);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .login-link a:hover {
      color: var(--gold);
      text-decoration: underline;
    }

    /* Enhanced Notification */
    .notification {
      padding: 16px 20px;
      border-radius: 12px;
      margin-bottom: 25px;
      font-size: 0.95em;
      display: none;
      text-align: left;
      border-left: 4px solid;
      animation: slideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      backdrop-filter: blur(10px);
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .notification.error {
      background: rgba(239, 68, 68, 0.1);
      color: #dc2626;
      border-left-color: var(--danger);
      display: block;
    }

    .notification.success {
      background: rgba(16, 185, 129, 0.1);
      color: #059669;
      border-left-color: var(--success);
      display: block;
    }

    /* Enhanced Password Strength */
    .password-strength {
      height: 6px;
      border-radius: 3px;
      margin-top: 8px;
      background: #e2e8f0;
      overflow: hidden;
      position: relative;
    }

    .password-strength-bar {
      height: 100%;
      width: 0%;
      transition: all 0.4s ease;
      border-radius: 3px;
    }

    .strength-weak {
      background: linear-gradient(90deg, var(--danger), #f97316);
      width: 33%;
    }

    .strength-medium {
      background: linear-gradient(90deg, #f59e0b, #eab308);
      width: 66%;
    }

    .strength-strong {
      background: linear-gradient(90deg, var(--success), #22c55e);
      width: 100%;
    }

    .strength-text {
      font-size: 0.8em;
      margin-top: 5px;
      font-weight: 600;
      text-align: right;
    }

    .strength-weak-text { color: var(--danger); }
    .strength-medium-text { color: #f59e0b; }
    .strength-strong-text { color: var(--success); }

    /* Footer */
    .footer {
      margin-top: 40px;
      text-align: center;
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.9em;
      max-width: 500px;
    }

    .footer a {
      color: var(--light-gold);
      text-decoration: none;
      transition: all 0.3s ease;
      font-weight: 500;
    }

    .footer a:hover {
      color: var(--white);
      text-decoration: underline;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 25px;
      margin-top: 15px;
    }

    /* Mobile Responsiveness */
    @media (max-width: 768px) {
      .form-row {
        flex-direction: column;
        gap: 0;
      }
      
      .signup-box {
        padding: 40px 30px;
      }
      
      .logo h1 {
        font-size: 2.2em;
      }

      .signup-box h2 {
        font-size: 1.6em;
      }
      
      .footer-links {
        flex-direction: column;
        gap: 10px;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 15px;
        justify-content: flex-start;
        padding-top: 40px;
      }
      
      .signup-container {
        padding: 10px;
      }
      
      .signup-box {
        padding: 35px 25px;
        border-radius: 16px;
      }
      
      .logo h1 {
        font-size: 2em;
      }
      
      .logo .subtitle {
        font-size: 1em;
      }
      
      .signup-box h2 {
        font-size: 1.4em;
        margin-bottom: 25px;
      }
      
      .signup-box input,
      .signup-box select {
        padding: 14px 16px;
        font-size: 1em;
      }
      
      .btn {
        padding: 16px 24px;
        font-size: 1em;
      }
      
      .terms {
        font-size: 0.85em;
      }
      
      .login-link {
        font-size: 0.9em;
      }
      
      .footer {
        margin-top: 30px;
        font-size: 0.8em;
      }
    }

    /* Success Animation */
    .success-checkmark {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      position: relative;
    }

    .check-icon {
      width: 80px;
      height: 80px;
      position: relative;
      border-radius: 50%;
      box-sizing: content-box;
      border: 4px solid var(--success);
    }

    .check-icon::before {
      top: 3px;
      left: -2px;
      width: 30px;
      transform-origin: 100% 50%;
    }

    .check-icon::after {
      top: 0;
      left: 30px;
      width: 60px;
      transform-origin: 0 50%;
    }

    .check-icon::before, .check-icon::after {
      content: '';
      height: 4px;
      background: var(--success);
      position: absolute;
      transform: scaleX(0);
    }

    .check-icon.animate::before {
      animation: check-circle 0.3s ease-in-out 0.3s forwards;
    }

    .check-icon.animate::after {
      animation: check-circle 0.3s ease-in-out 0.6s forwards;
    }

    @keyframes check-circle {
      0% { transform: scaleX(0); }
      100% { transform: scaleX(1); }
    }
  </style>
</head>

<body>
  <!-- Animated Background -->
  <div class="bg-decoration">
    <div class="bg-circle circle-1"></div>
    <div class="bg-circle circle-2"></div>
    <div class="bg-circle circle-3"></div>
  </div>

  <!-- Signup Container -->
  <div class="signup-container">
    <div class="signup-box">
      <div class="logo">
        <h1>EverGreen Empire</h1>
        <div class="subtitle">CREATOR PROGRAM</div>
      </div>

      <h2>Join Our Creator Community</h2>

      <div id="notification" class="notification"></div>

      <form id="signup-form">
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">First Name</label>
            <input type="text" id="firstName" placeholder="Enter your first name" required>
          </div>
          <div class="form-group">
            <label class="form-label">Last Name</label>
            <input type="text" id="lastName" placeholder="Enter your last name" required>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Email Address</label>
          <input type="email" id="email" placeholder="your.email@example.com" required>
        </div>

        <div class="form-group">
          <label class="form-label">YouTube Channel Name</label>
          <input type="text" id="channelName" placeholder="Your YouTube channel name" required>
        </div>

        <div class="form-group">
          <label class="form-label">Content Type</label>
          <select id="contentType" required>
            <option value="">Select your content type</option>
            <option value="gaming">üéÆ Gaming</option>
            <option value="vlogs">üìπ Vlogs & Lifestyle</option>
            <option value="education">üìö Educational</option>
            <option value="music">üéµ Music & Entertainment</option>
            <option value="tech">üíª Tech Reviews</option>
            <option value="beauty">üíÑ Beauty & Fashion</option>
            <option value="other">üåü Other</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Password</label>
          <div class="password-container">
            <input type="password" id="password" placeholder="Create a strong password" required>
            <button type="button" class="password-toggle" onclick="togglePassword('password')">üëÅÔ∏è</button>
          </div>
          <div class="password-strength">
            <div class="password-strength-bar" id="password-strength-bar"></div>
          </div>
          <div class="strength-text" id="password-strength-text"></div>
        </div>

        <div class="form-group">
          <label class="form-label">Confirm Password</label>
          <div class="password-container">
            <input type="password" id="confirmPassword" placeholder="Confirm your password" required>
            <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword')">üëÅÔ∏è</button>
          </div>
        </div>

        <div class="terms">
          By creating an account, you agree to our 
          <a href="Terms of Service.html">Terms of Service</a>, 
          <a href="Privacy policy.html">Privacy Policy</a>, and
          <a href="Creator Agreement.html">Creator Agreement</a>
        </div>

        <button type="submit" class="btn main" id="signupBtn">
          <span>Create Creator Account</span>
        </button>
      </form>

      <div class="login-link">
        Already have an account? <a href="login.html">Sign in to your dashboard</a>
      </div>
    </div>
  </div>

  <div class="footer">
    <p>¬© 2025 EverGreen Empire Ltd ‚Äî Premium Creator Platform</p>
    <div class="footer-links">
      <a href="index.html">‚Üê Back to Home</a>
      <a href="mailto:support@evergreenempireltd.com">Contact Support</a>
    </div>
  </div>

  <script>
    // Supabase Configuration
    const SUPABASE_URL = 'https://saerrnuzddfxfthllvpr.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNhZXJybnV6ZGRmeGZ0aGxsdnByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4MjM0OTIsImV4cCI6MjA3NzM5OTQ5Mn0.u7f365U3CFFq_BF2NSnT9WhDGw0bZ8PjnmzphCwYPMM';
    
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // Enhanced Notification system
    function showNotification(message, type = 'error') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification ${type}`;
      
      if (type === 'success') {
        setTimeout(() => {
          notification.style.display = 'none';
        }, 5000);
      }
    }

    // Enhanced password visibility toggle
    function togglePassword(fieldId) {
      const passwordInput = document.getElementById(fieldId);
      const toggleButton = passwordInput.parentNode.querySelector('.password-toggle');
      
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleButton.textContent = 'üôà';
        toggleButton.style.color = 'var(--gold)';
      } else {
        passwordInput.type = 'password';
        toggleButton.textContent = 'üëÅÔ∏è';
        toggleButton.style.color = '#64748b';
      }
    }

    // Enhanced password strength checker
    function checkPasswordStrength(password) {
      const strengthBar = document.getElementById('password-strength-bar');
      const strengthText = document.getElementById('password-strength-text');
      let strength = 0;
      let feedback = '';
      
      if (password.length >= 8) strength++;
      if (password.match(/[a-z]/) && password.match(/[A-Z]/)) strength++;
      if (password.match(/\d/)) strength++;
      if (password.match(/[^a-zA-Z\d]/)) strength++;
      
      strengthBar.className = 'password-strength-bar';
      strengthText.className = 'strength-text';
      
      if (password.length === 0) {
        strengthBar.style.width = '0%';
        strengthText.textContent = '';
      } else if (strength <= 1) {
        strengthBar.className += ' strength-weak';
        strengthText.className += ' strength-weak-text';
        strengthText.textContent = 'Weak password';
      } else if (strength <= 3) {
        strengthBar.className += ' strength-medium';
        strengthText.className += ' strength-medium-text';
        strengthText.textContent = 'Medium strength';
      } else {
        strengthBar.className += ' strength-strong';
        strengthText.className += ' strength-strong-text';
        strengthText.textContent = 'Strong password!';
      }
    }

    // Enhanced form validation
    function validateForm(formData) {
      const errors = [];
      
      // Check required fields
      if (!formData.firstName.trim()) errors.push('First name is required');
      if (!formData.lastName.trim()) errors.push('Last name is required');
      if (!formData.email.trim()) errors.push('Email address is required');
      if (!formData.channelName.trim()) errors.push('YouTube channel name is required');
      if (!formData.contentType) errors.push('Please select your content type');
      if (!formData.password) errors.push('Password is required');
      
      // Validate email format
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (formData.email && !emailRegex.test(formData.email)) {
        errors.push('Please enter a valid email address');
      }
      
      // Check password strength
      if (formData.password.length < 8) {
        errors.push('Password must be at least 8 characters long');
      }
      
      // Check if passwords match
      if (formData.password !== formData.confirmPassword) {
        errors.push('Passwords do not match');
      }
      
      return errors;
    }

    // Enhanced user profile creation
    async function createUserProfile(userId, userData) {
      try {
        const { data, error } = await supabase
          .from('profiles')
          .upsert({
            id: userId,
            full_name: `${userData.firstName} ${userData.lastName}`,
            email: userData.email,
            youtube_channel: userData.channelName,
            content_type: formData.contentType,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
          }, {
            onConflict: 'id'
          });

        if (error) {
          console.warn('Profile creation warning:', error);
          // Don't throw error - allow user to continue
        }
        return true;
      } catch (error) {
        console.error('Profile creation error:', error);
        // Don't block registration if profile creation fails
        return true;
      }
    }

    // Enhanced sign up user function
    async function signUpUser(userData) {
      try {
        // Create auth user
        const { data: authData, error: authError } = await supabase.auth.signUp({
          email: userData.email,
          password: userData.password,
          options: {
            data: {
              first_name: userData.firstName,
              last_name: userData.lastName,
              youtube_channel: userData.channelName,
              full_name: `${userData.firstName} ${userData.lastName}`
            }
          }
        });

        if (authError) {
          if (authError.message.includes('User already registered')) {
            throw new Error('An account with this email already exists. Please try logging in.');
          } else {
            throw authError;
          }
        }

        if (authData.user) {
          // Create user profile in background
          createUserProfile(authData.user.id, userData).catch(console.error);
          
          showNotification('üéâ Account created successfully! Redirecting...', 'success');
          
          // Auto-login the user
          setTimeout(async () => {
            const { error: signInError } = await supabase.auth.signInWithPassword({
              email: userData.email,
              password: userData.password
            });

            if (!signInError) {
              window.location.href = 'dashboard.html?signup=success';
            } else {
              window.location.href = 'login.html?signup=success&email=' + encodeURIComponent(userData.email);
            }
          }, 2000);
          
          return true;
        }

      } catch (error) {
        throw error;
      }
    }

    // Enhanced form submission handler
    document.getElementById("signup-form").addEventListener("submit", async (e) => {
      e.preventDefault();
      
      const signupBtn = document.getElementById('signupBtn');
      const originalText = signupBtn.innerHTML;
      
      // Collect form data
      const formData = {
        firstName: document.getElementById('firstName').value.trim(),
        lastName: document.getElementById('lastName').value.trim(),
        email: document.getElementById('email').value.trim(),
        channelName: document.getElementById('channelName').value.trim(),
        contentType: document.getElementById('contentType').value,
        password: document.getElementById('password').value,
        confirmPassword: document.getElementById('confirmPassword').value
      };
      
      // Validate form
      const errors = validateForm(formData);
      if (errors.length > 0) {
        showNotification(errors[0]);
        return;
      }
      
      // Show loading state
      signupBtn.disabled = true;
      signupBtn.classList.add('loading');
      
      try {
        await signUpUser(formData);
      } catch (error) {
        console.error('Signup error:', error);
        showNotification(error.message);
        
        signupBtn.disabled = false;
        signupBtn.classList.remove('loading');
        signupBtn.innerHTML = originalText;
      }
    });

    // Real-time password strength indicator
    document.getElementById('password').addEventListener('input', function() {
      checkPasswordStrength(this.value);
    });

    // Real-time password validation
    document.getElementById('confirmPassword').addEventListener('input', function() {
      const password = document.getElementById('password').value;
      const confirmPassword = this.value;
      
      if (confirmPassword && password !== confirmPassword) {
        this.classList.add('error');
      } else {
        this.classList.remove('error');
      }
    });

    // Clear error styling when user starts typing
    const formInputs = document.querySelectorAll('input, select');
    formInputs.forEach(input => {
      input.addEventListener('input', function() {
        this.classList.remove('error');
      });
    });

    // Auto-focus first name field
    document.getElementById('firstName').focus();

    // Check if user is already logged in
    document.addEventListener('DOMContentLoaded', async function() {
      const { data: { session } } = await supabase.auth.getSession();
      
      if (session) {
        showNotification('You are already logged in. Redirecting to dashboard...', 'success');
        setTimeout(() => {
          window.location.href = 'dashboard.html';
        }, 2000);
      }
    });

    // Add subtle hover effects to form elements
    document.querySelectorAll('.signup-box input, .signup-box select').forEach(element => {
      element.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-1px)';
      });
      
      element.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
      });
    });
  </script>
</body>
          </html>
